-- 부서 테이블
DROP TABLE DEPT CASCADE CONSTRAINTS;

CREATE TABLE DEPT(
  DEPT_ID VARCHAR2(20) CONSTRAINT PK_DEPT PRIMARY KEY,
  DEPT_NAME VARCHAR2(20),
  FAX VARCHAR2(20)
);

COMMENT ON TABLE DEPT IS '부서';
COMMENT ON COLUMN DEPT.DEPT_ID IS '부서코드';
COMMENT ON COLUMN DEPT.DEPT_NAME IS '부서명';
COMMENT ON COLUMN DEPT.FAX IS '팩스번호';

-- 부서 샘플 데이터
INSERT INTO DEPT VALUES ('A1', '관리팀', '02-448-1234');
INSERT INTO DEPT VALUES ('A2', '인사팀', '02-448-1235');
INSERT INTO DEPT VALUES ('B1', '개발1팀', '02-448-2345');
INSERT INTO DEPT VALUES ('B2', '개발2팀', '02-448-2346');
INSERT INTO DEPT VALUES ('C1', '디자인팀', '02-448-3456');
INSERT INTO DEPT VALUES ('D1', '영업팀', '02-448-4567');


-- 직급 테이블
DROP TABLE JOB CASCADE CONSTRAINTS;

CREATE TABLE JOB(
  JOB_ID VARCHAR2(20) CONSTRAINT PK_JOB PRIMARY KEY,
  JOB_NAME VARCHAR2(20),
  MIN_SAL NUMBER,
  MAX_SAL NUMBER
);

COMMENT ON TABLE JOB IS '직급';
COMMENT ON COLUMN JOB.JOB_ID IS '직급코드';
COMMENT ON COLUMN JOB.JOB_NAME IS '직급명';
COMMENT ON COLUMN JOB.MIN_SAL IS '최소급여';
COMMENT ON COLUMN JOB.MAX_SAL IS '최대급여';

-- 직급 샘플 데이터
INSERT INTO JOB VALUES ('J1', '대표이사', 200000000, 400000000);
INSERT INTO JOB VALUES ('J2', '부사장', 150000000, 300000000);
INSERT INTO JOB VALUES ('J3', '부장', 70000000, 100000000);
INSERT INTO JOB VALUES ('J4', '차장', 50000000, 80000000);
INSERT INTO JOB VALUES ('J5', '과장', 42000000, 60000000);
INSERT INTO JOB VALUES ('J6', '대리', 38000000, 56000000);
INSERT INTO JOB VALUES ('J7', '사원', 20000000, 40000000);


-- 호봉 테이블
DROP TABLE PAYSTEP CASCADE CONSTRAINTS;

CREATE TABLE PAYSTEP(
    PAYSTEP VARCHAR2(20) CONSTRAINT PK_PAYSTEP PRIMARY KEY,
    PAY_PCENT NUMBER
);

COMMENT ON TABLE PAYSTEP IS '호봉';
COMMENT ON COLUMN PAYSTEP.PAYSTEP IS '호봉';
COMMENT ON COLUMN PAYSTEP.PAY_PCENT IS '호봉퍼센트';

-- 호봉 샘플 데이터
INSERT INTO PAYSTEP VALUES ('1호봉', 0.1);
INSERT INTO PAYSTEP VALUES ('2호봉', 0.2);
INSERT INTO PAYSTEP VALUES ('3호봉', 0.3);


-- 사원 테이블
DROP TABLE EMPLOYEE CASCADE CONSTRAINTS;

CREATE TABLE EMPLOYEE (
  EMP_ID VARCHAR2(20) CONSTRAINT PK_EMPLOYEE PRIMARY KEY,
  EMAIL  VARCHAR2(50) CONSTRAINT NN_EMP_EMAIL NOT NULL,
  MY_PROFILE VARCHAR2(20),
  USER_ID VARCHAR2(20) CONSTRAINT NN_EMP_USERID NOT NULL,
  EMP_NAME VARCHAR2(20) CONSTRAINT NN_EMP_EMPNAME NOT NULL,
  USER_PWD VARCHAR2(20) CONSTRAINT NN_EMP_USERPWD NOT NULL,
  EMP_NO CHAR(14) CONSTRAINT NN_EMP_EMPNO NOT NULL,
  PHONE VARCHAR2(20) CONSTRAINT NN_EMP_PHONE NOT NULL,
  ADDRESS VARCHAR2(200) CONSTRAINT NN_EMP_ADDRESS NOT NULL,
  DEPT_ID VARCHAR2(20),
  JOB_ID VARCHAR2(20),
  PAYSTEP VARCHAR2(20),
  EMP_PHONE VARCHAR2(20),
  SALARY NUMBER,
  BONUS NUMBER,
  MARRIAGE CHAR(1) DEFAULT 'N',
  HIRE_DATE DATE DEFAULT SYSDATE,
  ID_LEVEL CHAR(1) DEFAULT 'G',
  SIGN VARCHAR2(20),
   
  CONSTRAINT UNI_EMP_EMAIL UNIQUE (EMAIL),
  CONSTRAINT UNI_EMP_USERID UNIQUE (USER_ID),
  CONSTRAINT UNI_EMP_EMPNO UNIQUE (EMP_NO),
  CONSTRAINT UNI_EMP_PHONE UNIQUE (PHONE),
  CONSTRAINT FK_EMP_DEPTID FOREIGN KEY (DEPT_ID) REFERENCES DEPT (DEPT_ID),
  CONSTRAINT FK_EMP_JOBID FOREIGN KEY (JOB_ID) REFERENCES JOB (JOB_ID),
  CONSTRAINT FK_EMP_PAYSTEP FOREIGN KEY (PAYSTEP) REFERENCES PAYSTEP (PAYSTEP),
  CONSTRAINT CHK_EMP_MARRIAGE CHECK (MARRIAGE IN ('Y', 'N')),
  CONSTRAINT CHK_EMP_IDLEVEL CHECK (ID_LEVEL IN ('G', 'M', 'S'))
);

COMMENT ON TABLE EMPLOYEE IS '사원' ;
COMMENT ON COLUMN EMPLOYEE.EMP_ID IS '사번';
COMMENT ON COLUMN EMPLOYEE.EMAIL IS '이메일';
COMMENT ON COLUMN EMPLOYEE.MY_PROFILE IS '프로필 사진';
COMMENT ON COLUMN EMPLOYEE.USER_ID IS '아이디';
COMMENT ON COLUMN EMPLOYEE.EMP_NAME IS '이름';
COMMENT ON COLUMN EMPLOYEE.USER_PWD IS '비밀번호';
COMMENT ON COLUMN EMPLOYEE.EMP_NO IS '주민번호';
COMMENT ON COLUMN EMPLOYEE.PHONE IS '전화번호';
COMMENT ON COLUMN EMPLOYEE.ADDRESS IS '주소';
COMMENT ON COLUMN EMPLOYEE.DEPT_ID IS '부서코드';
COMMENT ON COLUMN EMPLOYEE.JOB_ID IS '직급코드';
COMMENT ON COLUMN EMPLOYEE.PAYSTEP IS '호봉';
COMMENT ON COLUMN EMPLOYEE.EMP_PHONE IS '내선번호';
COMMENT ON COLUMN EMPLOYEE.SALARY IS '연봉';
COMMENT ON COLUMN EMPLOYEE.BONUS IS '보너스';
COMMENT ON COLUMN EMPLOYEE.MARRIAGE IS '결혼여부';
COMMENT ON COLUMN EMPLOYEE.HIRE_DATE IS '입사일';
COMMENT ON COLUMN EMPLOYEE.ID_LEVEL IS '계정구분';
COMMENT ON COLUMN EMPLOYEE.SIGN IS '전자사인';

-- 사원 테이블 샘플 데이터
INSERT INTO EMPLOYEE VALUES ('1224', 'december3104@naver.com', '혜진.png', 'december3104', '손혜진', '3104', '901224-2111111', '010-7111-1111', '경기도 의정부시', 'A1', 'J1', '3호봉', '333-3333', 7000000, 1.5, 'N', DEFAULT, 'S', NULL);
INSERT INTO EMPLOYEE VALUES ('1004', 'BSJZZANG3@NAVER.COM', '상준.png', 'bsjzzang3', '변상준', '1q2w3e', '890127-1111111', '010-3333-3333', '의정부시 호원동', 'A1', 'J2', '2호봉', '1230-001', 5000000, 0.5, DEFAULT, DEFAULT, DEFAULT, NULL);
INSERT INTO EMPLOYEE VALUES ('1024', 'YHSAAA@NAVER.COM', '호성.png', 'yhsto001', '양호성', 'poiu0987!@#', '910812-1031111', '010-3456-2152', '구리시 구리동', 'A2', 'J3', '1호봉', '1230-006', 4800000, 0.4, DEFAULT, DEFAULT, DEFAULT, NULL);
INSERT INTO EMPLOYEE VALUES ('1050', 'KHGYU@NAVER.COM', '형규.png', 'gudrb0202', '김형규', '0202', '920812-1077711', '010-3111-2444', '강남구 오피스텔', 'A2', 'J3', '1호봉', '1230-013', 4700000, 0.4, DEFAULT, DEFAULT, DEFAULT, NULL);
INSERT INTO EMPLOYEE VALUES ('1067', 'LAOPOS@NAVER.COM', '수연.png', 'laopos', '우수연', 'laopos11', '920813-2077711', '010-5511-5224', '서울시 송파구', 'A2', 'J3', '1호봉', '1230-021', 4700000, 0.4, DEFAULT, DEFAULT, DEFAULT, NULL);
INSERT INTO EMPLOYEE VALUES ('2001', 'AWIEJF@NAVER.COM', NULL, 'ASDF', '신승민', '102938', '930101-1234123', '010-2838-4949', '의정부시 의정부동', 'B1', 'J1', '3호봉', '1230-139', 4000000, 0.3, DEFAULT, DEFAULT, DEFAULT, NULL);
INSERT INTO EMPLOYEE VALUES ('4048', 'WWNW@GMAIL.COM', NULL, 'QOQOQO', '조하영', 'QWERASDF', '920303-2123456', '010-2345-8888' , '신림동 54번길', 'B1', 'J2', '2호봉', '1231-003', 3000000, 0.3, DEFAULT, DEFAULT, DEFAULT, NULL);
INSERT INTO EMPLOYEE VALUES ('4049', 'SLSLSL@GMAIL.COM', NULL, 'WIWIWI', '박근수', 'POIUPP', '930213-1020000','010-2838-2819', '강남구 82번길', 'B2', 'J3', '2호봉', '1232-001', 2900000, 0.2, DEFAULT, DEFAULT, DEFAULT, NULL);
INSERT INTO EMPLOYEE VALUES ('4072', 'BEGSE@GMAIL.COM', NULL, 'WAXXX', '김은수', 'ZXCVVCXZ', '910421-1120300','010-1555-2444', '동대문구1번길', 'B2', 'J3', '2호봉', '1232-004', 2900000, 0.2, DEFAULT, DEFAULT, DEFAULT, NULL);    


-- 계정상태 테이블
DROP TABLE STATE CASCADE CONSTRAINTS;

CREATE TABLE STATE(
    EMP_ID VARCHAR2(20) CONSTRAINT PK_STATE PRIMARY KEY,
    STATE VARCHAR2(20),
    REASON VARCHAR2(50),
    STATE_DATE DATE,
    
    CONSTRAINT FK_STATE_EMPID FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE (EMP_ID)
);

COMMENT ON TABLE STATE IS '계정상태';
COMMENT ON COLUMN STATE.EMP_ID IS '사번';
COMMENT ON COLUMN STATE.STATE IS '상태';
COMMENT ON COLUMN STATE.REASON IS '사유';
COMMENT ON COLUMN STATE.STATE_DATE IS '날짜';

-- 계정상태 샘플 데이터
INSERT INTO STATE VALUES ('1224', '재직', '', '19/06/10');
INSERT INTO STATE VALUES ('1004', '재직', '', '19/06/10');
INSERT INTO STATE VALUES ('1024', '재직', '', '19/06/10');
INSERT INTO STATE VALUES ('1050', '재직', '', '19/06/10');
INSERT INTO STATE VALUES ('1067', '재직', '', '19/06/10');
INSERT INTO STATE VALUES ('2001', '휴직', '병가', '19/10/03');
INSERT INTO STATE VALUES ('4048', '휴직', '육아', '19/09/30');
INSERT INTO STATE VALUES ('4049', '퇴직', '정상퇴직', '19/08/20');
INSERT INTO STATE VALUES ('4072', '퇴직', '권고사직', '19/08/26');


-- 전자결재 문서양식 테이블
DROP TABLE DOCUMENTFORM CASCADE CONSTRAINTS;

CREATE TABLE DOCUMENTFORM (
  DOC_NO NUMBER CONSTRAINT PK_DOCUMENTFORM PRIMARY KEY,
  DOC_NAME VARCHAR2(30) NOT NULL,
  DOC_FORM VARCHAR2(30) CONSTRAINT NN_DOC_DOCFORM NOT NULL,
  DOC_CONTENT VARCHAR2(4000)
);

COMMENT ON TABLE DOCUMENTFORM IS '문서양식' ;
COMMENT ON COLUMN DOCUMENTFORM.DOC_NO IS '문서양식 번호';
COMMENT ON COLUMN DOCUMENTFORM.DOC_NAME IS '문서양식 제목';
COMMENT ON COLUMN DOCUMENTFORM.DOC_FORM IS '결재선 폼';
COMMENT ON COLUMN DOCUMENTFORM.DOC_CONTENT IS '문서 내용';

-- 전자결재 문서양식 번호 시퀀스
DROP SEQUENCE DOC_SEQ;

CREATE SEQUENCE DOC_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 전자결재 문서양식 샘플 데이터
INSERT INTO DOCUMENTFORM VALUES (DOC_SEQ.NEXTVAL, '업무연락', '참조', NULL);
INSERT INTO DOCUMENTFORM VALUES (DOC_SEQ.NEXTVAL, '결재서류', '회람', NULL);
INSERT INTO DOCUMENTFORM VALUES (DOC_SEQ.NEXTVAL, '지출결의서', '기본', NULL);
INSERT INTO DOCUMENTFORM VALUES (DOC_SEQ.NEXTVAL, '업무연락', '참조', NULL);
INSERT INTO DOCUMENTFORM VALUES (DOC_SEQ.NEXTVAL, '휴가', '회람', NULL);


-- 전자결재 테이블
DROP TABLE ELECTRONICAPPROVAL CASCADE CONSTRAINTS;

CREATE TABLE ELECTRONICAPPROVAL (
  EA_NO NUMBER CONSTRAINT PK_ELECTRONLCAPPROVAL PRIMARY KEY,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_EA_EMPID NOT NULL,
  DOC_NO NUMBER CONSTRAINT NN_EA_DOCNO NOT NULL,
  EA_NAME VARCHAR2(50) CONSTRAINT NN_EA_EANAME NOT NULL,
  EA_SAVE_DATE DATE CONSTRAINT NN_EA_EASAVEDATE NOT NULL,
  EA_SECURITY VARCHAR2(20) CONSTRAINT NN_EA_EASECURITY NOT NULL,
  EA_LINE VARCHAR2(90),
  EA_RESULT VARCHAR2(20),
  EA_UPDATE DATE DEFAULT SYSDATE CONSTRAINT NN_EA_EAUPDATE NOT NULL,
  EA_CHECK_DATE DATE,
  EA_CONTENT VARCHAR2(4000),
  EA_ORIGINAL_FILENAME VARCHAR2(100),  
  EA_RENAME_FILENAME VARCHAR2(100),
  

  CONSTRAINT FK_EA_EMPID FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE (EMP_ID),
  CONSTRAINT FK_EA_DOCNO FOREIGN KEY (DOC_NO) REFERENCES DOCUMENTFORM (DOC_NO)
);

COMMENT ON TABLE ELECTRONICAPPROVAL IS '전자결재' ;
COMMENT ON COLUMN ELECTRONICAPPROVAL.EA_NO IS '결재 번호';
COMMENT ON COLUMN ELECTRONICAPPROVAL.EMP_ID IS '사번';
COMMENT ON COLUMN ELECTRONICAPPROVAL.DOC_NO IS '문서양식 번호';
COMMENT ON COLUMN ELECTRONICAPPROVAL.EA_NAME IS '전자결재 제목';
COMMENT ON COLUMN ELECTRONICAPPROVAL.EA_SAVE_DATE IS '보존연한';
COMMENT ON COLUMN ELECTRONICAPPROVAL.EA_SECURITY IS '보안등급';
COMMENT ON COLUMN ELECTRONICAPPROVAL.EA_LINE IS '결재자 사번';
COMMENT ON COLUMN ELECTRONICAPPROVAL.EA_RESULT IS '결재 결과';
COMMENT ON COLUMN ELECTRONICAPPROVAL.EA_UPDATE IS '결재 올린 날짜';
COMMENT ON COLUMN ELECTRONICAPPROVAL.EA_CHECK_DATE IS '결재 처리된 날짜';
COMMENT ON COLUMN ELECTRONICAPPROVAL.EA_CONTENT IS '전자결재 내용';
COMMENT ON COLUMN ELECTRONICAPPROVAL.EA_ORIGINAL_FILENAME IS '실제 파일명';
COMMENT ON COLUMN ELECTRONICAPPROVAL.EA_RENAME_FILENAME IS '파일명';

-- 전자결재 결재 번호
DROP SEQUENCE EA_SEQ;

CREATE SEQUENCE EA_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 전자결재 테이블 샘플 데이터
INSERT INTO ELECTRONICAPPROVAL VALUES (EA_SEQ.NEXTVAL, '1024', 1, '프로젝트양호성', '2022/10/03', '대리', '1224', '진행', DEFAULT, NULL, NULL,NULL,NULL);
INSERT INTO ELECTRONICAPPROVAL VALUES (EA_SEQ.NEXTVAL, '1067', 2, '프로젝트우수연', '2023/10/03', '과장', '1224,1024', '진행', DEFAULT, NULL, NULL,NULL,NULL);
INSERT INTO ELECTRONICAPPROVAL VALUES (EA_SEQ.NEXTVAL, '1224', 3, '프로젝트손혜진', '2024/10/03', '팀장', '1224', '진행', DEFAULT, NULL, NULL,NULL,NULL);
INSERT INTO ELECTRONICAPPROVAL VALUES (EA_SEQ.NEXTVAL, '1004', 4, '프로젝트변상준', '2025/10/03', '사원', '1224,1050,1067', '진행', DEFAULT, NULL, NULL,NULL,NULL);
INSERT INTO ELECTRONICAPPROVAL VALUES (EA_SEQ.NEXTVAL, '1050', 5, '프로젝트김형규', '2026/10/03', '대리', '1224', '진행', DEFAULT, NULL, NULL,NULL,NULL);


-- 전자결재 결재선 테이블
DROP TABLE APPROVALLINE CASCADE CONSTRAINTS;

CREATE TABLE APPROVALLINE (
  EA_NO NUMBER CONSTRAINT NN_AL_EANO NOT NULL,
  EMP_ID1 VARCHAR2(90) CONSTRAINT NN_AL_EMPID NOT NULL,
  EMP_ID2 VARCHAR2(90),
  EMP_ID3 VARCHAR2(90),
  EMP_ID4 VARCHAR2(90),
  EMP_ID5 VARCHAR2(90),

  CONSTRAINT FK_AL_EANO FOREIGN KEY (EA_NO) REFERENCES ELECTRONICAPPROVAL (EA_NO),
  CONSTRAINT FK_AL_EMPID1 FOREIGN KEY (EMP_ID1) REFERENCES EMPLOYEE (EMP_ID),
  CONSTRAINT FK_AL_EMPID2 FOREIGN KEY (EMP_ID2) REFERENCES EMPLOYEE (EMP_ID),
  CONSTRAINT FK_AL_EMPID3 FOREIGN KEY (EMP_ID3) REFERENCES EMPLOYEE (EMP_ID),
  CONSTRAINT FK_AL_EMPID4 FOREIGN KEY (EMP_ID4) REFERENCES EMPLOYEE (EMP_ID),
  CONSTRAINT FK_AL_EMPID5 FOREIGN KEY (EMP_ID5) REFERENCES EMPLOYEE (EMP_ID)
);

COMMENT ON TABLE APPROVALLINE IS '결재선' ;
COMMENT ON COLUMN APPROVALLINE.EA_NO IS '결재번호';
COMMENT ON COLUMN APPROVALLINE.EMP_ID1 IS '결재자 사번';

-- 전자결재 결재선 테이블 샘플 데이터
INSERT INTO APPROVALLINE VALUES (1, '1224', NULL, NULL, NULL, NULL);
INSERT INTO APPROVALLINE VALUES (2, '1224', '1024', NULL, NULL, NULL);
INSERT INTO APPROVALLINE VALUES (3, '1224', NULL, NULL, NULL, NULL);
INSERT INTO APPROVALLINE VALUES (4, '1224', '1050', '1067', NULL, NULL);
INSERT INTO APPROVALLINE VALUES (5, '1224', NULL, NULL, NULL, NULL);


-- 전자메일 테이블
DROP TABLE EMAIL CASCADE CONSTRAINTS;

CREATE TABLE EMAIL(
  EMAIL_NO NUMBER CONSTRAINT PK_EMAIL PRIMARY KEY,
  EMAIL VARCHAR2(50) CONSTRAINT NN_EMAIL_EMAIL NOT NULL,
  EMAIL_TITLE VARCHAR2(50),
  EMAIL_CONTENT VARCHAR2(4000),
  EMAIL_DATE DATE DEFAULT SYSDATE,
  EMAIL_MARK CHAR(1) DEFAULT 'N',
  EMAIL_READ CHAR(1) DEFAULT 'N',
  EMAIL_STORAGE CHAR(1) DEFAULT 'N',
  EMAIL_DEL CHAR(1) DEFAULT 'N',
  EMAIL_SENDER VARCHAR2(500) CONSTRAINT NN_EMAIL_EMAILSENDER NOT NULL,
  EMAIL_RECEIVER VARCHAR2(500) CONSTRAINT NN_EMAIL_EMAILRECEIVER NOT NULL,
  EMAIL_FILE_RENAME VARCHAR2(100),
  EMAIL_FILE_ORIGINAL_NAME VARCHAR2(100),
  EMAIL_FILE_SIZE NUMBER, 

  CONSTRAINT FK_EMAIL_EMAIL FOREIGN KEY (EMAIL) REFERENCES EMPLOYEE (EMAIL),
  CONSTRAINT CHK_EMAIL_EMAILMARK CHECK (EMAIL_MARK IN ('Y', 'N')),
  CONSTRAINT CHK_EMAIL_EMAILREAD CHECK (EMAIL_READ IN ('Y', 'N')),
  CONSTRAINT CHK_EMAIL_EMAILSTORAGE CHECK (EMAIL_STORAGE IN ('Y', 'N')),
  CONSTRAINT CHK_EMAIL_EMAILDEL CHECK (EMAIL_DEL IN ('Y', 'N'))
);

COMMENT ON TABLE EMAIL IS '전자메일';
COMMENT ON COLUMN EMAIL.EMAIL_NO IS '메일 번호';
COMMENT ON COLUMN EMAIL.EMAIL IS '이메일';
COMMENT ON COLUMN EMAIL.EMAIL_TITLE IS '제목';
COMMENT ON COLUMN EMAIL.EMAIL_CONTENT IS '내용';
COMMENT ON COLUMN EMAIL.EMAIL_DATE IS '보낸 날짜';
COMMENT ON COLUMN EMAIL.EMAIL_MARK IS '중요 표시';
COMMENT ON COLUMN EMAIL.EMAIL_READ IS '읽음 표시';
COMMENT ON COLUMN EMAIL.EMAIL_STORAGE IS '임시보관 여부';
COMMENT ON COLUMN EMAIL.EMAIL_DEL IS '삭제 여부';
COMMENT ON COLUMN EMAIL.EMAIL_SENDER IS '보낸 사람';
COMMENT ON COLUMN EMAIL.EMAIL_RECEIVER IS '받는 사람';
COMMENT ON COLUMN EMAIL.EMAIL_FILE_RENAME IS '바뀐첨부파일명';
COMMENT ON COLUMN EMAIL.EMAIL_FILE_ORIGINAL_NAME IS '원본첨부파일명';
COMMENT ON COLUMN EMAIL.EMAIL_FILE_SIZE IS '파일사이즈';

-- 전자메일 번호 시퀀스
DROP SEQUENCE EMAIL_SEQ;

CREATE SEQUENCE EMAIL_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 전자메일 테이블 샘플 데이터
INSERT INTO EMAIL VALUES (EMAIL_SEQ.NEXTVAL,'KHGYU@NAVER.COM' , '보고서 입니다.', '확인 부탁드립니다', '19/10/03', 'N', 'N', 'N', 'N', '김형규', '손혜진', NULL, NULL, NULL);
INSERT INTO EMAIL VALUES (EMAIL_SEQ.NEXTVAL,'KHGYU@NAVER.COM' , '회식장소 입니다.', '노란통닭 입니다.', '19/10/03', 'N', 'N', 'N', 'N', '김형규', '양호성', NULL, NULL, NULL);
INSERT INTO EMAIL VALUES (EMAIL_SEQ.NEXTVAL,'KHGYU@NAVER.COM' , '워크샵 장소 입니다.', '경기도 수원시 영통구 영통동...', '19/10/03', 'N', 'N', 'N', 'N', '김형규', '우수연', NULL, NULL, NULL);
INSERT INTO EMAIL VALUES (EMAIL_SEQ.NEXTVAL,'KHGYU@NAVER.COM' , '프로젝트 계획서 입니다', '확인 부탁드립니다', '19/10/03', 'N', 'N', 'N', 'N', '김형규', '변상준', NULL, NULL, NULL);
INSERT INTO EMAIL VALUES (EMAIL_SEQ.NEXTVAL,'KHGYU@NAVER.COM' , '회식 변경된 장소 입니다.', '유객주로 오시면 됩니다!', '19/10/03', 'N', 'N', 'N', 'N', '김형규', '손혜진', NULL, NULL, NULL);


-- 카테고리 테이블
DROP TABLE CATEGORY CASCADE CONSTRAINTS;

CREATE TABLE CATEGORY(
  CATE_NO NUMBER CONSTRAINT PK_CATEGORY PRIMARY KEY,
  CATE_NAME VARCHAR2(30) CONSTRAINT NN_CATE_CATENAME NOT NULL,
  CATE_COLOR VARCHAR2(20) CONSTRAINT NN_CATE_CATECOLOR NOT NULL,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_CATE_EMPID NOT NULL,
  
  CONSTRAINT FK_CATE_EMPID FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE (EMP_ID)
);

COMMENT ON TABLE CATEGORY IS '카테고리';
COMMENT ON COLUMN CATEGORY.CATE_NO IS '카테고리 번호';
COMMENT ON COLUMN CATEGORY.CATE_NAME IS '카테고리명';
COMMENT ON COLUMN CATEGORY.CATE_COLOR IS '카테고리 색상';
COMMENT ON COLUMN CATEGORY.EMP_ID IS '사번';

-- 카테고리 번호 시퀀스
DROP SEQUENCE CATE_SEQ;

CREATE SEQUENCE CATE_SEQ
START WITH 1
INCREMENT BY 1 
NOMAXVALUE 
NOCYCLE;

-- 카테고리 테이블 샘플 데이터
INSERT INTO CATEGORY VALUES (CATE_SEQ.NEXTVAL, '휴가 캘린더', 'RED', '1224');
INSERT INTO CATEGORY VALUES (CATE_SEQ.NEXTVAL, '교육 캘린더', 'BLUE', '1224');
INSERT INTO CATEGORY VALUES (CATE_SEQ.NEXTVAL, '생일 캘린더', 'PURPLE', '1004');
INSERT INTO CATEGORY VALUES (CATE_SEQ.NEXTVAL, '업무 캘린더', 'GRAY', '1004');
INSERT INTO CATEGORY VALUES (CATE_SEQ.NEXTVAL, '부서 캘린더', 'PINK', '1224');


-- 캘린더 테이블
DROP TABLE CALENDAR CASCADE CONSTRAINTS;

CREATE TABLE CALENDAR(
  CAL_NO NUMBER CONSTRAINT PK_CALENDAR PRIMARY KEY,
  CATE_NO NUMBER CONSTRAINT NN_CAL_CATENO NOT NULL,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_CAL_EMPID NOT NULL,
  CAL_TITLE VARCHAR2(50) CONSTRAINT NN_CAL_CALTITLE NOT NULL,
  CAL_START_DATE DATE DEFAULT SYSDATE,
  CAL_END_DATE DATE DEFAULT SYSDATE,
  CAL_ALL_DAY CHAR(1) DEFAULT 'N',
  CAL_CONTENT VARCHAR2(500),
  
  CONSTRAINT FK_CAL_CATENO FOREIGN KEY (CATE_NO) REFERENCES CATEGORY (CATE_NO) ON DELETE CASCADE,
  CONSTRAINT FK_CAL_EMPID FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE (EMP_ID) ON DELETE CASCADE,
  CONSTRAINT CHK_CAL_ALLDAY CHECK (CAL_ALL_DAY IN ('Y', 'N'))
);

COMMENT ON TABLE CALENDAR IS '캘린더';
COMMENT ON COLUMN CALENDAR.CAL_NO IS '캘린더 번호';
COMMENT ON COLUMN CALENDAR.CATE_NO IS '카테고리 번호';
COMMENT ON COLUMN CALENDAR.EMP_ID IS '사번';
COMMENT ON COLUMN CALENDAR.CAL_TITLE IS '일정 제목';
COMMENT ON COLUMN CALENDAR.CAL_START_DATE IS '시작일';
COMMENT ON COLUMN CALENDAR.CAL_END_DATE IS '종료일';
COMMENT ON COLUMN CALENDAR.CAL_ALL_DAY IS '종일 여부';
COMMENT ON COLUMN CALENDAR.CAL_CONTENT IS '내용';

-- 캘린더 번호 시퀀스
DROP SEQUENCE CAL_SEQ;

CREATE SEQUENCE CAL_SEQ
START WITH 1
INCREMENT BY 1 
NOMAXVALUE
NOCYCLE;

-- 캘린더 테이블 샘플 데이터
INSERT INTO CALENDAR VALUES (CAL_SEQ.NEXTVAL, 1, '1224', '강릉 여행', DEFAULT, DEFAULT, 'Y', NULL);
INSERT INTO CALENDAR VALUES (CAL_SEQ.NEXTVAL, 2, '1224', '신입사원 전체 교육', '19/10/10', '19/10/11', 'N', '장소 : 세미나실');
INSERT INTO CALENDAR VALUES (CAL_SEQ.NEXTVAL, 3, '1224', '손혜진 사원', '19/12/24', '19/12/24', 'Y', NULL);
INSERT INTO CALENDAR VALUES (CAL_SEQ.NEXTVAL, 4, '1224', '채팅 구현', DEFAULT, DEFAULT, 'Y', '채팅....');
INSERT INTO CALENDAR VALUES (CAL_SEQ.NEXTVAL, 5, '1224', '부서 회식일', '19/11/01', '19/11/01', 'Y', '무조건 참가 요망');
INSERT INTO CALENDAR VALUES (CAL_SEQ.NEXTVAL, 1, '1224', '의정부 맛집', DEFAULT, DEFAULT, 'Y', NULL);


-- 공지사항 테이블
DROP TABLE NOTICE CASCADE CONSTRAINTS;

CREATE TABLE NOTICE(
    NOTICE_NO NUMBER CONSTRAINT PK_NOTICE PRIMARY KEY,
    EMP_ID VARCHAR2(20) CONSTRAINT NN_NOTICE_EMPID NOT NULL,
    NOTICE_TITLE VARCHAR2(100) CONSTRAINT NN_NOTICE_NOTICETITLE NOT NULL,
    NOTICE_DATE DATE DEFAULT SYSDATE,
    NOTICE_VIEW NUMBER DEFAULT 0,
    NOTICE_CONTENT VARCHAR2(500),
    
    CONSTRAINT FK_NOTICE_EMPID FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID)
);

COMMENT ON TABLE NOTICE IS '공지사항';
COMMENT ON COLUMN NOTICE.NOTICE_NO IS '공지사항 글 번호';
COMMENT ON COLUMN NOTICE.EMP_ID IS '사번';
COMMENT ON COLUMN NOTICE.NOTICE_TITLE IS '제목';
COMMENT ON COLUMN NOTICE.NOTICE_DATE IS '작성일';
COMMENT ON COLUMN NOTICE.NOTICE_VIEW IS '조회수';
COMMENT ON COLUMN NOTICE.NOTICE_CONTENT IS '내용';

-- 공지사항 번호 시퀀스
DROP SEQUENCE NOTICE_SEQ;

CREATE SEQUENCE NOTICE_SEQ
START WITH 1
INCREMENT BY 1 
NOMAXVALUE 
NOCYCLE;

-- 공지사항 샘플 데이터
INSERT INTO NOTICE VALUES (NOTICE_SEQ.NEXTVAL, '1224', '공지사항입니다', DEFAULT, DEFAULT, '나도 프로젝트 공지사항 입니다. 저희 사이트를 이용해 주셔서 감사합니다.');
INSERT INTO NOTICE VALUES (NOTICE_SEQ.NEXTVAL, '1224', '구매품의서 결재라인 결정사항입니다.', DEFAULT, DEFAULT, '구매품의서 작성할때, 결재라인은 팀장, 사장님으로 해주세요. 감사합니다~');
INSERT INTO NOTICE VALUES (NOTICE_SEQ.NEXTVAL, '1224', '휴가 결재라인 결정사항입니다.', DEFAULT, DEFAULT, '휴가 신청하실때, 결재라인은 팀장 결재로 종결이 됩니다. 감사합니다~');
INSERT INTO NOTICE VALUES (NOTICE_SEQ.NEXTVAL, '1224', '악성/스팸 메일 열람 금지 요청 건', DEFAULT, DEFAULT, '최근 당사 이메일을 통해 악성바이러스로 추정되는 이메일의 유입이 진행되고 있습니다. 첨부파일을 클릭 또는 URL을 클릭 하는 경우가 있을 수가 있는데, 절대로 첨부파일이나 URL 은 클릭하지 마세요.');
INSERT INTO NOTICE VALUES (NOTICE_SEQ.NEXTVAL, '1224', '비상연락망(2019.10.04)', DEFAULT, DEFAULT, '2019년 10월 04일자 비상연락망 공지합니다.');


-- 공지사항 첨부파일 테이블
DROP TABLE NOTICEFILE CASCADE CONSTRAINTS;

CREATE TABLE NOTICEFILE(
  NOTICE_NO NUMBER CONSTRAINT NN_NFILE_NOTICENO NOT NULL,
  NFILE_RENAME VARCHAR2(100) CONSTRAINT NN_NFILE_NFILERENAME NOT NULL,
  NFILE_ORIGINAL_NAME VARCHAR2(100) CONSTRAINT NN_NFILE_NFILEORIGINALNAME NOT NULL,
  NFILE_SIZE NUMBER CONSTRAINT NN_NFILE_NFILESIZE NOT NULL,
  
  CONSTRAINT FK_NFILE_NOTICENO FOREIGN KEY(NOTICE_NO) REFERENCES NOTICE (NOTICE_NO)
);

COMMENT ON TABLE NOTICEFILE IS '공지사항 첨부파일';
COMMENT ON COLUMN NOTICEFILE.NOTICE_NO IS '공지사항 글 번호';
COMMENT ON COLUMN NOTICEFILE.NFILE_RENAME IS '파일명';
COMMENT ON COLUMN NOTICEFILE.NFILE_ORIGINAL_NAME IS '실제 파일명';
COMMENT ON COLUMN NOTICEFILE.NFILE_SIZE IS '파일 크기';

-- 공지사항 첨부파일 샘플 데이터
INSERT INTO NOTICEFILE VALUES (1, '20190622032147.hwp', '공지사항.hwp', 150);
INSERT INTO NOTICEFILE VALUES (4, '20190723092450.zip', '백신툴.zip', 300);
INSERT INTO NOTICEFILE VALUES (5, '20191004110521.zip', '비상연락망(2019.10.04).zip', 350);


-- 설문조사 테이블
DROP TABLE SURVEY CASCADE CONSTRAINTS;

CREATE TABLE SURVEY(
  SUR_NO NUMBER CONSTRAINT PK_SURVEY PRIMARY KEY,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_SUR_EMPID NOT NULL,
  SUR_TITLE VARCHAR2(100) CONSTRAINT NN_SUR_SURTITLE NOT NULL,
  SUR_DATE DATE DEFAULT SYSDATE,
  SUR_VIEW NUMBER DEFAULT 0,
  SUR_CONTENT VARCHAR2(500),
  SUR_STARTDATE DATE CONSTRAINT NN_SUR_SURSTARTDATE NOT NULL,
  SUR_ENDDATE DATE CONSTRAINT NN_SUR_SURENDDATE NOT NULL,
  
  CONSTRAINT FK_SUR_EMPID FOREIGN KEY(EMP_ID) REFERENCES EMPLOYEE (EMP_ID)
);

COMMENT ON TABLE SURVEY IS '설문조사';
COMMENT ON COLUMN SURVEY.SUR_NO IS '설문조사 글 번호';
COMMENT ON COLUMN SURVEY.EMP_ID IS '사번';
COMMENT ON COLUMN SURVEY.SUR_TITLE IS '제목';
COMMENT ON COLUMN SURVEY.SUR_DATE IS '작성일';
COMMENT ON COLUMN SURVEY.SUR_VIEW IS '조회수';
COMMENT ON COLUMN SURVEY.SUR_CONTENT IS '내용';
COMMENT ON COLUMN SURVEY.SUR_STARTDATE IS '설문 시작일';
COMMENT ON COLUMN SURVEY.SUR_ENDDATE IS '설문 마감일';

-- 설문조사 글 번호 시퀀스
DROP SEQUENCE SURVEY_SEQ;

CREATE SEQUENCE SURVEY_SEQ
START WITH 1
INCREMENT BY 1 
NOMAXVALUE 
NOCYCLE;

-- 설문조사 샘플 데이터
INSERT INTO SURVEY VALUES (SURVEY_SEQ.NEXTVAL, '1224', '도시농업포털 설문조사 부탁드립니다! (기한 10/10일)', DEFAULT, DEFAULT, '내부 프로젝트 중 하나인 도시농업포털의 사용자 설문조사 부탁드립니다!빠른 답변 부탁드립니다!감사합니다!!', '19/10/04', '19/10/10');
INSERT INTO SURVEY VALUES (SURVEY_SEQ.NEXTVAL, '1224', '사내 비품 관련 설문조사 입니다.', DEFAULT, DEFAULT, '사무실에서 사용하는 사무용품, 비품 등 필요 시 합당한 필요 이유와 목록을 답하여 주세요.', '19/10/03', '19/10/23');
INSERT INTO SURVEY VALUES (SURVEY_SEQ.NEXTVAL, '1224', '사원만족도 설문조사', DEFAULT, DEFAULT, '사원만족도 설문조사 입니다. 설문조사를 사용하여 직원들의 사기를 측정하고, 만족도 향상을 위하여 많은 답변 부탁드립니다~', '19/10/03', '19/11/03');
INSERT INTO SURVEY VALUES (SURVEY_SEQ.NEXTVAL, '1224', '사내교육 소감 설문지', DEFAULT, DEFAULT, '사내 교육 프로그램 소감 설문입니다. 더 나은 교육을 위해 교육을 듣고난 소감을 답해주세요~', '19/10/03', '19/11/13');


-- 설문조사 첨부파일 테이블
DROP TABLE SURVEYFILE CASCADE CONSTRAINTS;

CREATE TABLE SURVEYFILE(
  SUR_NO NUMBER CONSTRAINT NN_SFILE_SURNO NOT NULL,
  SFILE_RENAME VARCHAR2(100) CONSTRAINT NN_SFILE_SFILERENAME NOT NULL,
  SFILE_ORIGINAL_NAME VARCHAR2(100) CONSTRAINT NN_SFILE_SFILEORIGINALNAME NOT NULL,
  SFILE_SIZE NUMBER CONSTRAINT NN_SFILE_SFILESIZE NOT NULL,
  
  CONSTRAINT FK_SFILE_SURNO FOREIGN KEY(SUR_NO) REFERENCES SURVEY (SUR_NO)
);

COMMENT ON TABLE SURVEYFILE IS '설문조사 첨부파일';
COMMENT ON COLUMN SURVEYFILE.SUR_NO IS '설문조사 글 번호';
COMMENT ON COLUMN SURVEYFILE.SFILE_RENAME IS '파일명';
COMMENT ON COLUMN SURVEYFILE.SFILE_ORIGINAL_NAME IS '실제 파일명';
COMMENT ON COLUMN SURVEYFILE.SFILE_SIZE IS '파일 크기';

-- 설문조사 첨부파일 샘플 데이터
INSERT INTO SURVEYFILE VALUES (1, '20190705124512.ppt', '도시농업포털.ppt', 15);
INSERT INTO SURVEYFILE VALUES (3, '20190812071535.pdf', '사원만족도설문조사.pdf', 30);
INSERT INTO SURVEYFILE VALUES (4, '20190930073122.pdf', '사내교육 설문.pdf', 35);


-- 자유게시판 테이블
DROP TABLE BOARD CASCADE CONSTRAINTS;

CREATE TABLE BOARD (
  BOARD_NO NUMBER CONSTRAINT PK_BOARD PRIMARY KEY,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_BOARD_EMPID NOT NULL,
  BOARD_TITLE VARCHAR2(100) CONSTRAINT NN_BOARD_BOARDTITLE NOT NULL,
  BOARD_DATE DATE DEFAULT SYSDATE,
  BOARD_VIEW NUMBER DEFAULT 0,
  BOARD_CONTENT VARCHAR2(500),
  
  CONSTRAINT FK_BOARD_EMPID FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE (EMP_ID)
);

COMMENT ON TABLE BOARD IS '자유게시판';
COMMENT ON COLUMN BOARD.BOARD_NO IS '게시판 글 번호';
COMMENT ON COLUMN BOARD.EMP_ID IS '사번';
COMMENT ON COLUMN BOARD.BOARD_TITLE IS '제목';
COMMENT ON COLUMN BOARD.BOARD_DATE IS '작성일';
COMMENT ON COLUMN BOARD.BOARD_VIEW IS '조회수';
COMMENT ON COLUMN BOARD.BOARD_CONTENT IS '내용';

-- 자유게시판 글 번호 시퀀스
DROP SEQUENCE BOARD_SEQ;

CREATE SEQUENCE BOARD_SEQ
START WITH 1
INCREMENT BY 1 
NOMAXVALUE 
NOCYCLE;

-- 자유게시판 테이블 샘플 데이터
INSERT INTO BOARD VALUES (BOARD_SEQ.NEXTVAL, '1224', '사진공유해요~', DEFAULT, DEFAULT, '핸드폰에 묵혀있던 사진들 방출합니다^^');
INSERT INTO BOARD VALUES (BOARD_SEQ.NEXTVAL, '1224', '동호회 관련', DEFAULT, DEFAULT, '우리회사는 동호회가 없나요? 축구동호회가 있으면 좋을거 같아서 아쉬움에 글 남겨요..');
INSERT INTO BOARD VALUES (BOARD_SEQ.NEXTVAL, '1224', '코딩자료공유', DEFAULT, DEFAULT, '유용한 코딩사이트와 자료 공유해요~');
INSERT INTO BOARD VALUES (BOARD_SEQ.NEXTVAL, '1224', '9월28일 야유회사진 공유해요~', DEFAULT, DEFAULT, '야유회 너무 즐거웠어요~ 잘나온 사진공유해요~');


-- 자유게시판 첨부파일 테이블
DROP TABLE BOARDFILE CASCADE CONSTRAINTS;

CREATE TABLE BOARDFILE (
  BOARD_NO NUMBER CONSTRAINT NN_BFILE_BOARDNO NOT NULL,
  BFILE_RENAME VARCHAR2(100) CONSTRAINT NN_BFILE_BFILERENAME NOT NULL,
  BFILE_ORIGINAL_NAME VARCHAR2(100) CONSTRAINT NN_BFILE_BFILEORIGINALNAME NOT NULL,
  BFILE_SIZE NUMBER CONSTRAINT NN_BFILE_BFILESIZE NOT NULL,
  
  CONSTRAINT FK_BFILE_BOARDNO FOREIGN KEY(BOARD_NO) REFERENCES BOARD (BOARD_NO)
);

COMMENT ON TABLE BOARDFILE IS '자유게시판 첨부파일';
COMMENT ON COLUMN BOARDFILE.BOARD_NO IS '게시판 번호';
COMMENT ON COLUMN BOARDFILE.BFILE_RENAME IS '파일명';
COMMENT ON COLUMN BOARDFILE.BFILE_ORIGINAL_NAME IS '실제 파일명';
COMMENT ON COLUMN BOARDFILE.BFILE_SIZE IS '파일 크기';

-- 자유게시판 첨부파일 샘플 데이터
INSERT INTO BOARDFILE VALUES (1, '20191004120325.zip', '강아지사진모음.zip', 130);
INSERT INTO BOARDFILE VALUES (3, '20191005082045.pdf', '코딩자료.pdf', 167);
INSERT INTO BOARDFILE VALUES (4, '20191007054515.jpg', '야유회사진.jpg', 186);


-- 댓글 테이블
DROP TABLE COMMENTS CASCADE CONSTRAINTS;

CREATE TABLE COMMENTS (
  CM_NO NUMBER CONSTRAINT PK_COMMENTS PRIMARY KEY,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_COMMENTS_EMPID NOT NULL,
  CM_CONTENT VARCHAR2(500),
  CM_DATE DATE DEFAULT SYSDATE,
  CM_REF   NUMBER,
   CM_REPLY_REF   NUMBER ,
   CM_REPLY_LEV   NUMBER DEFAULT 1,
   CM_REPLY_SEQ NUMBER DEFAULT 1,
  
  CONSTRAINT FK_COMMENTS_CMREF FOREIGN KEY (CM_REF) REFERENCES BOARD (BOARD_NO)
);

COMMENT ON TABLE COMMENTS IS '댓글';
COMMENT ON COLUMN COMMENTS.CM_NO IS '댓글 번호';
COMMENT ON COLUMN COMMENTS.EMP_ID IS '사번';
COMMENT ON COLUMN COMMENTS.CM_CONTENT IS '내용';
COMMENT ON COLUMN COMMENTS.CM_DATE IS '작성일';
COMMENT ON COLUMN COMMENTS.CM_REF IS '참조 원글 번호';
COMMENT ON COLUMN COMMENTS.CM_REPLY_REF IS '참조 댓글 번호';
COMMENT ON COLUMN COMMENTS.CM_REPLY_LEV IS '댓글 단계';
COMMENT ON COLUMN COMMENTS.CM_REPLY_SEQ IS '댓글 순번';

-- 댓글번호 시퀀스
DROP SEQUENCE COMMENTS_SEQ;

CREATE SEQUENCE COMMENTS_SEQ
START WITH 1
INCREMENT BY 1 
NOMAXVALUE 
NOCYCLE;

-- 자유게시판 첨부파일 샘플 데이터
INSERT INTO COMMENTS VALUES (COMMENTS_SEQ.NEXTVAL, 1224, '사진이뻐요~', DEFAULT, 1, NULL, DEFAULT, DEFAULT);
INSERT INTO COMMENTS VALUES (COMMENTS_SEQ.NEXTVAL, 1224, '다른사진 더 없나요??', DEFAULT, 1, NULL, DEFAULT, DEFAULT);
INSERT INTO COMMENTS VALUES (COMMENTS_SEQ.NEXTVAL, 1224, '동호회 나두원해요', DEFAULT, 2, NULL, DEFAULT, DEFAULT);
INSERT INTO COMMENTS VALUES (COMMENTS_SEQ.NEXTVAL, 1224, '야유회사진 잘나왔네요~', DEFAULT, 4, NULL, DEFAULT, DEFAULT);


-- 주소록 테이블
DROP TABLE ADDRESSBOOK CASCADE CONSTRAINTS;

CREATE TABLE ADDRESSBOOK (
  AB_NO NUMBER CONSTRAINT PK_ADDRESSBOOK PRIMARY KEY,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_AB_EMPID NOT NULL,
  AB_NAME VARCHAR2(20) CONSTRAINT NN_AB_ABNAME NOT NULL,
  AB_EMAIL VARCHAR2(50),
  AB_PHONE VARCHAR2(20) CONSTRAINT NN_AB_ABPHONE NOT NULL,
  AB_COM VARCHAR2(50),
  AB_DEPT_NAME VARCHAR2(20),
  AB_JOB_TITLE VARCHAR2(20),
  AB_ADDRESS VARCHAR2(200),
  AB_WEB VARCHAR2(30),
  AB_BIRTH VARCHAR2(20),
  AB_NOTE VARCHAR2(120),
  AB_SHARE CHAR(1) DEFAULT 'N' CONSTRAINT NN_AB_ABSHARE NOT NULL,
  AB_FILENAME VARCHAR2(50),

  CONSTRAINT FK_AB_EMPID FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE (EMP_ID),
  CONSTRAINT CHK_AB_ABSHARE CHECK (AB_SHARE IN ('Y', 'N'))
);

COMMENT ON TABLE ADDRESSBOOK IS '주소록' ;
COMMENT ON COLUMN ADDRESSBOOK.AB_NO IS '주소록 번호';
COMMENT ON COLUMN ADDRESSBOOK.EMP_ID IS '사번';
COMMENT ON COLUMN ADDRESSBOOK.AB_NAME IS '이름';
COMMENT ON COLUMN ADDRESSBOOK.AB_EMAIL IS '이메일';
COMMENT ON COLUMN ADDRESSBOOK.AB_PHONE IS '전화번호';
COMMENT ON COLUMN ADDRESSBOOK.AB_COM IS '회사';
COMMENT ON COLUMN ADDRESSBOOK.AB_DEPT_NAME IS '부서';
COMMENT ON COLUMN ADDRESSBOOK.AB_JOB_TITLE IS '직급';
COMMENT ON COLUMN ADDRESSBOOK.AB_ADDRESS IS '주소';
COMMENT ON COLUMN ADDRESSBOOK.AB_WEB IS '홈페이지';
COMMENT ON COLUMN ADDRESSBOOK.AB_BIRTH IS '생일';
COMMENT ON COLUMN ADDRESSBOOK.AB_NOTE IS '메모';
COMMENT ON COLUMN ADDRESSBOOK.AB_SHARE IS '공유 여부';
COMMENT ON COLUMN ADDRESSBOOK.AB_FILENAME IS '파일 이름';

-- 주소록 번호 시퀀스
DROP SEQUENCE AB_SEQ;

CREATE SEQUENCE AB_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 주소록 테이블 샘플 데이터
INSERT INTO ADDRESSBOOK VALUES(AB_SEQ.NEXTVAL,'1024','양호성','yhsto00@Naver.com','010-1234-1234','나도회사','개발부','대리','오남리 오남읍 한신아파트',NULL,NULL,NULL,DEFAULT,'identy1.jpg');
INSERT INTO ADDRESSBOOK VALUES(AB_SEQ.NEXTVAL,'1067','우수연','yhsto001@Naver.com','010-1234-1234','kh정보','인사팀','과장','의정부 북부지방경찰서',NULL,NULL,NULL,DEFAULT,'identy2.jpg');
INSERT INTO ADDRESSBOOK VALUES(AB_SEQ.NEXTVAL,'1004','변상준','yhsto002@Naver.com','010-1234-1234','인터파k','물류팀','사원','역삼동',NULL,NULL,NULL,DEFAULT,'identy3.jpg');
INSERT INTO ADDRESSBOOK VALUES(AB_SEQ.NEXTVAL,'1050','김형규','yhsto003@Naver.com','010-1234-1234','삼s','인사팀','사장','강남역 서초동',NULL,NULL,NULL,DEFAULT,'identy4.jpg');
INSERT INTO ADDRESSBOOK VALUES(AB_SEQ.NEXTVAL,'1224','손혜진','yhsto004@Naver.com','010-1234-1234','엘g','개발부','팀장','오남읍 양지리',NULL,NULL,NULL,DEFAULT,'identy5.jpg');


-- 예약 테이블
DROP TABLE RESERVATION CASCADE CONSTRAINTS;

CREATE TABLE RESERVATION(
  RV_NO NUMBER CONSTRAINT PK_RESERVATION PRIMARY KEY,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_RV_EMPID NOT NULL,
  RV_NAME VARCHAR2(20) CONSTRAINT NN_RV_RVNAME NOT NULL,
  RV_START_DATE DATE DEFAULT SYSDATE,
  RV_END_DATE DATE DEFAULT SYSDATE,
  RV_USE VARCHAR2(200),
  RV_STATE VARCHAR2(20) CONSTRAINT NN_RV_RVSTATE NOT NULL,
  RV_EMP_ID VARCHAR2(20),
  RV_RETURN CHAR(1) DEFAULT 'N',
  
  CONSTRAINT FK_RV_EMPID FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE (EMP_ID) ON DELETE CASCADE,
  CONSTRAINT CHK_RV_RVUSE CHECK (RV_NAME IN ('회의실', '차량')),
  CONSTRAINT CHK_RV_RVSTATE CHECK (RV_STATE IN ('승인', '대기', '반려')),
  CONSTRAINT CHK_RV_RVRETURN CHECK (RV_RETURN IN ('Y', 'N'))
);

COMMENT ON TABLE RESERVATION IS '예약';
COMMENT ON COLUMN RESERVATION.RV_NO IS '예약 번호';
COMMENT ON COLUMN RESERVATION.EMP_ID IS '사번';
COMMENT ON COLUMN RESERVATION.RV_NAME IS '자원명';
COMMENT ON COLUMN RESERVATION.RV_START_DATE IS '시작일';
COMMENT ON COLUMN RESERVATION.RV_END_DATE IS '종료일';
COMMENT ON COLUMN RESERVATION.RV_USE IS '사용 용도';
COMMENT ON COLUMN RESERVATION.RV_STATE IS '상태';
COMMENT ON COLUMN RESERVATION.RV_EMP_ID IS '결재 처리자';
COMMENT ON COLUMN RESERVATION.RV_RETURN IS '반납 여부';

-- 예약 번호 시퀀스
DROP SEQUENCE RV_SEQ;

CREATE SEQUENCE RV_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 예약 테이블 샘플 데이터
INSERT INTO RESERVATION VALUES (RV_SEQ.NEXTVAL, '1224', '회의실', DEFAULT, DEFAULT, '신입 교육', '승인', '1004', 'Y');
INSERT INTO RESERVATION VALUES (RV_SEQ.NEXTVAL, '1224', '차량', DEFAULT, DEFAULT, NULL, '대기', NULL, DEFAULT);
INSERT INTO RESERVATION VALUES (RV_SEQ.NEXTVAL, '1224', '회의실', '19/10/04', '19/10/04', '업무 회의', '승인', '1004', DEFAULT);
INSERT INTO RESERVATION VALUES (RV_SEQ.NEXTVAL, '1224', '차량', '19/11/01', '19/11/01', '회식 장소 이동용', '반려', '1004', DEFAULT);
INSERT INTO RESERVATION VALUES (RV_SEQ.NEXTVAL, '1224', '회의실', '19/12/24', '19/12/24', '손혜진 사원 생일파티', '승인', '1004', DEFAULT);


-- 근태 테이블
DROP TABLE ATTENDANCE CASCADE CONSTRAINTS;

CREATE TABLE ATTENDANCE(
  EMP_ID VARCHAR2(20) CONSTRAINT NN_ATTENDANCE_EMPID NOT NULL,
  ATTENDANCE DATE DEFAULT SYSDATE,
  LEAVE_TIME DATE DEFAULT SYSDATE,
  ATT_STATE VARCHAR2(20) CONSTRAINT NN_ATTENDANCE_ATTSTATE NOT NULL,
  ATT_REASON VARCHAR2(500),
  
  CONSTRAINT FK_ATTENDANCE_EMPID FOREIGN KEY(EMP_ID) REFERENCES EMPLOYEE (EMP_ID)
);

COMMENT ON TABLE ATTENDANCE IS '근태';
COMMENT ON COLUMN ATTENDANCE.EMP_ID IS '사번';
COMMENT ON COLUMN ATTENDANCE.ATTENDANCE IS '출근시간';
COMMENT ON COLUMN ATTENDANCE.LEAVE_TIME IS '퇴근시간';
COMMENT ON COLUMN ATTENDANCE.ATT_STATE IS '상태';
COMMENT ON COLUMN ATTENDANCE.ATT_REASON IS '사유';

-- 근태 테이블 샘플 데이터
INSERT INTO ATTENDANCE VALUES ('1004', TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS') ,'YYYYMMDDHH24MISS'), TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS') ,'YYYYMMDDHH24MISS'), '정상' , '정상');
INSERT INTO ATTENDANCE VALUES ('1004', NULL, TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS') ,'YYYYMMDDHH24MISS'), '지각' , '병원치료');
INSERT INTO ATTENDANCE VALUES ('1004', TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS') ,'YYYYMMDDHH24MISS'), TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS') ,'YYYYMMDDHH24MISS'), '정상' , '정상');
INSERT INTO ATTENDANCE VALUES ('1004', NULL , NULL , '미출근' , '부친상');
INSERT INTO ATTENDANCE VALUES ('1004', TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS') ,'YYYYMMDDHH24MISS'), TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS') ,'YYYYMMDDHH24MISS'), '비정상' , '오후반차');


-- 휴가 생성 테이블
DROP TABLE CREATEHOLIDAY CASCADE CONSTRAINTS;

CREATE TABLE CREATEHOLIDAY(
  HOLI_NO NUMBER CONSTRAINT PK_CREATEHOLIDAY PRIMARY KEY,
  CRE_HOLI_DATE DATE DEFAULT SYSDATE,
  CRE_HOLI_CONTENT VARCHAR2(20) ,
  CRE_HOLI_DAY NUMBER
);

COMMENT ON TABLE CREATEHOLIDAY IS '휴가생성';
COMMENT ON COLUMN CREATEHOLIDAY.HOLI_NO IS '휴가 번호';
COMMENT ON COLUMN CREATEHOLIDAY.CRE_HOLI_DATE IS '생성일';
COMMENT ON COLUMN CREATEHOLIDAY.CRE_HOLI_CONTENT IS '생성 내역';
COMMENT ON COLUMN CREATEHOLIDAY.CRE_HOLI_DAY IS '생성 일수';

-- 휴가 번호 시퀀스
DROP SEQUENCE HOLI_SEQ;

CREATE SEQUENCE HOLI_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 휴가생성 테이블 샘플 데이터
INSERT INTO CREATEHOLIDAY VALUES (HOLI_SEQ.NEXTVAL, SYSDATE, '병가', 2);
INSERT INTO CREATEHOLIDAY VALUES (HOLI_SEQ.NEXTVAL, SYSDATE, '경조사', 5);
INSERT INTO CREATEHOLIDAY VALUES (HOLI_SEQ.NEXTVAL, SYSDATE, '출산휴가', 120);
INSERT INTO CREATEHOLIDAY VALUES (HOLI_SEQ.NEXTVAL, SYSDATE, '연차', 7);
INSERT INTO CREATEHOLIDAY VALUES (HOLI_SEQ.NEXTVAL, SYSDATE, '보상휴가', 3);


-- 휴가 테이블
DROP TABLE HOLIDAY CASCADE CONSTRAINTS;

CREATE TABLE HOLIDAY(
  HOLI_NO NUMBER CONSTRAINT NN_HOLIDAY_HOLINO NOT NULL,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_HOLIDAY_EMPID NOT NULL,
  HOLI_START_DATE DATE DEFAULT SYSDATE,
  HOLI_END_DATE DATE DEFAULT SYSDATE,
  HOLI_TOTAL NUMBER DEFAULT 0,
  HOLI_USE NUMBER DEFAULT 0,
  
  CONSTRAINT FK_HOLIDAY_HOLINO FOREIGN KEY (HOLI_NO) REFERENCES CREATEHOLIDAY (HOLI_NO),
  CONSTRAINT FK_HOLIDAY_EMPID FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE (EMP_ID)
);

COMMENT ON TABLE HOLIDAY IS '휴가';
COMMENT ON COLUMN HOLIDAY.HOLI_NO IS '휴가 번호';
COMMENT ON COLUMN HOLIDAY.EMP_ID IS '사번';
COMMENT ON COLUMN HOLIDAY.HOLI_START_DATE IS '시작일';
COMMENT ON COLUMN HOLIDAY.HOLI_END_DATE IS '종료일';
COMMENT ON COLUMN HOLIDAY.HOLI_TOTAL IS '전체 휴가 횟수';
COMMENT ON COLUMN HOLIDAY.HOLI_USE IS '사용 휴가 횟수';

-- 휴가 테이블 샘플 데이터
INSERT INTO HOLIDAY VALUES (1,'1004', SYSDATE, SYSDATE, 15, 5);
INSERT INTO HOLIDAY VALUES (2,'1224', SYSDATE, SYSDATE, 15, 15);
INSERT INTO HOLIDAY VALUES (3,'1024', SYSDATE, SYSDATE, 15, 2);
INSERT INTO HOLIDAY VALUES (4,'1050', SYSDATE, SYSDATE, 15, 0);
INSERT INTO HOLIDAY VALUES (5,'1067', SYSDATE, SYSDATE, 15, 6);


--쪽지 테이블
DROP TABLE DIRECTMESSAGE CASCADE CONSTRAINTS;

CREATE TABLE DIRECTMESSAGE(
  DM_NO NUMBER CONSTRAINT PK_DIRECTMESSAGE PRIMARY KEY,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_DIRECTMESSAGE_EMPID NOT NULL,
  DM_SENDER VARCHAR2(500),
  DM_RECEIVE VARCHAR2(500),
  DM_TITLE VARCHAR2(50),
  DM_CONTENT VARCHAR2(1000),
  DM_SEND_DATE DATE DEFAULT SYSDATE,
  
  CONSTRAINT FK_DIRECTMESSAGE_EMPID FOREIGN KEY(EMP_ID) REFERENCES EMPLOYEE (EMP_ID)
);

COMMENT ON TABLE DIRECTMESSAGE IS '쪽지';
COMMENT ON COLUMN DIRECTMESSAGE.DM_NO IS '쪽지 번호';
COMMENT ON COLUMN DIRECTMESSAGE.DM_SENDER IS '보낸 사람';
COMMENT ON COLUMN DIRECTMESSAGE.DM_RECEIVE IS '받는 사람';
COMMENT ON COLUMN DIRECTMESSAGE.DM_TITLE IS '제목';
COMMENT ON COLUMN DIRECTMESSAGE.DM_CONTENT IS '내용';
COMMENT ON COLUMN DIRECTMESSAGE.DM_SEND_DATE IS '보낸 날짜';

-- 쪽지 번호 시퀀스
DROP SEQUENCE DM_SEQ;

CREATE SEQUENCE DM_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 쪽지번호 테이블 샘플 데이터
INSERT INTO DIRECTMESSAGE VALUES (DM_SEQ.NEXTVAL,'1004', '김형규', '손혜진', '회의시작합니다.', '회의실로 오세요.', SYSDATE);
INSERT INTO DIRECTMESSAGE VALUES (DM_SEQ.NEXTVAL,'1004', '김형규', '양호성', '식사.', '식사하러 가시죠~.', SYSDATE);
INSERT INTO DIRECTMESSAGE VALUES (DM_SEQ.NEXTVAL,'1004', '김형규', '우수연', '야근.', '오늘 야근입니다!', SYSDATE);
INSERT INTO DIRECTMESSAGE VALUES (DM_SEQ.NEXTVAL,'1004', '김형규', '변상준', '회식장소', '회식장소 어디로 잡으면 될까요?', SYSDATE);
INSERT INTO DIRECTMESSAGE VALUES (DM_SEQ.NEXTVAL,'1004', '김형규', '손혜진', '퇴근.', '먼저 퇴근해 보도록 하겠습니다.', SYSDATE);


-- 채팅방 테이블
DROP TABLE CHATTING CASCADE CONSTRAINTS;

CREATE TABLE CHATTING(
  CHAT_ROOM_NO NUMBER CONSTRAINT PK_CHATTING PRIMARY KEY,
  CHAT_TITLE VARCHAR2(20) CONSTRAINT NN_CHAT_CHATTITLE NOT NULL,
  CHAT_USERS_TOTAL NUMBER CONSTRAINT NN_CHAT_CHATUSERSTOTAL NOT NULL,
  CHAT_CREATE_DATE DATE DEFAULT SYSDATE CONSTRAINT NN_CHAT_CHATCREATEDATE NOT NULL,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_CHAT_EMPID NOT NULL,
    
  CONSTRAINT FK_CHAT_EMPID FOREIGN KEY (EMP_ID) REFERENCES EMPLOYEE(EMP_ID)
);

COMMENT ON TABLE CHATTING IS '채팅방' ;
COMMENT ON COLUMN CHATTING.CHAT_ROOM_NO IS '방 번호';
COMMENT ON COLUMN CHATTING.CHAT_TITLE IS '방 제목';
COMMENT ON COLUMN CHATTING.CHAT_USERS_TOTAL IS '참여 인원';
COMMENT ON COLUMN CHATTING.CHAT_CREATE_DATE IS '방 생성일';
COMMENT ON COLUMN CHATTING.EMP_ID IS '방 생성자';

-- 채팅방 번호 시퀀스
DROP SEQUENCE CHAT_SEQ;

CREATE SEQUENCE CHAT_SEQ
START WITH 1
INCREMENT BY 1 
NOMAXVALUE 
NOCYCLE;
  
-- 채팅방 샘플 데이터
INSERT INTO CHATTING VALUES (CHAT_SEQ.NEXTVAL, '나도방', 5, DEFAULT, '1004');
INSERT INTO CHATTING VALUES (CHAT_SEQ.NEXTVAL, '개인톡은수', 2, DEFAULT, '2001');
INSERT INTO CHATTING VALUES (CHAT_SEQ.NEXTVAL, '개인톡승민', 2, DEFAULT, '1004');
INSERT INTO CHATTING VALUES (CHAT_SEQ.NEXTVAL, '개인톡은수', 2, DEFAULT, '4048');
INSERT INTO CHATTING VALUES (CHAT_SEQ.NEXTVAL, '개인톡근수', 2, DEFAULT, '4072');


-- 방 참여 사용자 테이블
DROP TABLE INTHECHAT CASCADE CONSTRAINTS;

CREATE TABLE INTHECHAT (
  CHAT_ROOM_NO NUMBER CONSTRAINT NN_ITC_CHATROOMNO NOT NULL,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_ITC_EMPID NOT NULL,

  CONSTRAINT FK_ITC_CHATROOMNO FOREIGN KEY(CHAT_ROOM_NO) REFERENCES CHATTING(CHAT_ROOM_NO),
  CONSTRAINT FK_ITC_EMPID FOREIGN KEY(EMP_ID) REFERENCES EMPLOYEE(EMP_ID),
  CONSTRAINT PK_INTHECHAT PRIMARY KEY(CHAT_ROOM_NO, EMP_ID)
);

COMMENT ON TABLE INTHECHAT IS '방 참여 사용자' ;
COMMENT ON COLUMN INTHECHAT.EMP_ID IS '사번';
COMMENT ON COLUMN INTHECHAT.CHAT_ROOM_NO IS '방 번호';

-- 방 참여 사용자 테이블 샘플 데이터
INSERT INTO INTHECHAT VALUES (1, '1004');
INSERT INTO INTHECHAT VALUES (1, '1224');
INSERT INTO INTHECHAT VALUES (1, '1024');
INSERT INTO INTHECHAT VALUES (1, '1050');
INSERT INTO INTHECHAT VALUES (1, '1067');
INSERT INTO INTHECHAT VALUES (2, '2001');
INSERT INTO INTHECHAT VALUES (2, '4072');
INSERT INTO INTHECHAT VALUES (3, '1004');
INSERT INTO INTHECHAT VALUES (3, '2001');
INSERT INTO INTHECHAT VALUES (4, '4048');
INSERT INTO INTHECHAT VALUES (4, '4072');
INSERT INTO INTHECHAT VALUES (5, '4072');
INSERT INTO INTHECHAT VALUES (5, '4049');


-- 채팅글 테이블
DROP TABLE CHCONTENT CASCADE CONSTRAINTS;

CREATE TABLE CHCONTENT(
  CHAT_NO NUMBER CONSTRAINT PK_CHCONTENT PRIMARY KEY,
  CHAT_ROOM_NO NUMBER CONSTRAINT NN_CHCON_CHATROOMNO NOT NULL,
  EMP_ID VARCHAR2(20) CONSTRAINT NN_CHCON_EMPID NOT NULL,
  CHAT_CONTENT VARCHAR2(200) CONSTRAINT NN_CHCON_CHATCONTENT NOT NULL,
  CHAT_SEND_TIME DATE DEFAULT SYSDATE,
    
  CONSTRAINT FK_CHCON_IDNO FOREIGN KEY(CHAT_ROOM_NO, EMP_ID) REFERENCES INTHECHAT(CHAT_ROOM_NO, EMP_ID)
);

COMMENT ON TABLE CHCONTENT IS '채팅글' ;
COMMENT ON COLUMN CHCONTENT.CHAT_ROOM_NO IS '방 번호';
COMMENT ON COLUMN CHCONTENT.EMP_ID IS '사번';
COMMENT ON COLUMN CHCONTENT.CHAT_CONTENT IS '글 번호';
COMMENT ON COLUMN CHCONTENT.CHAT_SEND_TIME IS '글 생성 시간';

-- 채팅글 번호 시퀀스
DROP SEQUENCE CHCON_SEQ;

CREATE SEQUENCE CHCON_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 채팅글 테이블 샘플 데이터
INSERT INTO CHCONTENT VALUES (CHCON_SEQ.NEXTVAL, 1, '1004','안녕', DEFAULT);
INSERT INTO CHCONTENT VALUES (CHCON_SEQ.NEXTVAL, 1, '1224', '배고파', DEFAULT);
INSERT INTO CHCONTENT VALUES (CHCON_SEQ.NEXTVAL, 2, '2001', '안녕하세요', DEFAULT);
INSERT INTO CHCONTENT VALUES (CHCON_SEQ.NEXTVAL, 4, '4072', '어디가', DEFAULT);
INSERT INTO CHCONTENT VALUES (CHCON_SEQ.NEXTVAL, 4, '4048', '집', DEFAULT);
INSERT INTO CHCONTENT VALUES (CHCON_SEQ.NEXTVAL, 1, '1024', '안녕하세요', DEFAULT);
INSERT INTO CHCONTENT VALUES (CHCON_SEQ.NEXTVAL, 3, '1004', '밥먹자', DEFAULT);
INSERT INTO CHCONTENT VALUES (CHCON_SEQ.NEXTVAL, 3, '2001', '어디갈까요', DEFAULT);
INSERT INTO CHCONTENT VALUES (CHCON_SEQ.NEXTVAL, 5, '4072', '안녕하세요', DEFAULT);
INSERT INTO CHCONTENT VALUES (CHCON_SEQ.NEXTVAL, 5, '4049', '동해물과 백두산이 마르고 닳도록 하느님이 보우하사 우리나라만세', DEFAULT);


-- 클라우드 관리자 
-- 사용자 테이블
DROP TABLE GROUPWAREUSER CASCADE CONSTRAINTS;

CREATE TABLE GROUPWAREUSER (
  USER_CODE VARCHAR2(20) CONSTRAINT PK_USER PRIMARY KEY,
  USER_NAME VARCHAR2(20) CONSTRAINT NN_USER_USERNAME NOT NULL,
  USER_ID VARCHAR2(20) CONSTRAINT NN_USER_USERID NOT NULL,
  USER_PWD VARCHAR2(20) CONSTRAINT NN_USER_USERPWD NOT NULL,
  USER_COM VARCHAR2(20) CONSTRAINT NN_USER_USERCOM NOT NULL,
  USER_PHONE VARCHAR2(25) CONSTRAINT NN_USER_USERPHONE NOT NULL,
  USER_SEL VARCHAR2(20),
  USER_EMAIL VARCHAR2(50),
  USER_ADDRESS VARCHAR2(200) CONSTRAINT NN_USER_USERADDRESS NOT NULL,
  USER_DB VARCHAR2(20) CONSTRAINT NN_USER_USERDB NOT NULL,
  USER_DATE DATE DEFAULT SYSDATE,
  USER_LAST_DAY DATE DEFAULT SYSDATE,
  USER_OFFICE_WEB VARCHAR2(200) CONSTRAINT NN_USER_USEROFFICEWEB NOT NULL,

  CONSTRAINT FK_USER_USERID FOREIGN KEY (USER_ID) REFERENCES EMPLOYEE (USER_ID) ON DELETE CASCADE,
  CONSTRAINT UNI_USER_USEROFFICEWEB UNIQUE (USER_OFFICE_WEB)
);

COMMENT ON TABLE GROUPWAREUSER IS '사용자';
COMMENT ON COLUMN GROUPWAREUSER.USER_CODE IS '사용자 코드';
COMMENT ON COLUMN GROUPWAREUSER.USER_NAME IS '대표자명';
COMMENT ON COLUMN GROUPWAREUSER.USER_ID IS '아이디';
COMMENT ON COLUMN GROUPWAREUSER.USER_PWD IS '비밀번호';
COMMENT ON COLUMN GROUPWAREUSER.USER_COM IS '회사명';
COMMENT ON COLUMN GROUPWAREUSER.USER_PHONE IS '전화번호';
COMMENT ON COLUMN GROUPWAREUSER.USER_SEL IS '휴대폰';
COMMENT ON COLUMN GROUPWAREUSER.USER_EMAIL IS '이메일';
COMMENT ON COLUMN GROUPWAREUSER.USER_ADDRESS IS '주소';
COMMENT ON COLUMN GROUPWAREUSER.USER_DB IS 'DB 제공량';
COMMENT ON COLUMN GROUPWAREUSER.USER_DATE IS '가입일';
COMMENT ON COLUMN GROUPWAREUSER.USER_LAST_DAY IS '계약 기간';
COMMENT ON COLUMN GROUPWAREUSER.USER_OFFICE_WEB IS '그룹웨어 주소';

-- 사용자 테이블 샘플 데이터
INSERT INTO GROUPWAREUSER VALUES ('A001', '손혜진', 'december3104', '3104', '나도그룹', '031-711-1111', '010-7111-1111', 'december3104@naver.com', '경기도 의정부시', '500GB', '18/12/24', '19/12/24', 'nado');
INSERT INTO GROUPWAREUSER VALUES ('A002', '변상준', 'bsjzzang3', '1q2w3e', '오늘뭐하지', '031-234-5678', '010-1234-5678', 'bsjzzang3@gmail.com', '경기도 의정부시', '100GB', DEFAULT, '19/11/03', 'nadu');
INSERT INTO GROUPWAREUSER VALUES ('A003', '양호성', 'yhsto001', 'poiu0987!@#', '전자결재', '02-222-3333', '010-222-3333', 'yhsto001@naver.com', '경기도 남양주시', '200GB', '18/11/01', DEFAULT, 'cgroup');
INSERT INTO GROUPWAREUSER VALUES ('A004', '우수연', 'laopos', 'laopos11', '라오포스', '02-1234-5678', '010-5555-7777', 'laopos@naver.com', '서울시 송파구', '300GB', DEFAULT, '2020/01/30', 'test');
INSERT INTO GROUPWAREUSER VALUES ('A005', '김형규', 'gudrb0202', '0202', '나두', '031-888-9999', '010-0202-0202', 'gudrb0202@naver.com', '경기도 수원시', '100GB', '17/10/01', '2020/01/30', 'group');


-- 교육 테이블
DROP TABLE EDUCATION CASCADE CONSTRAINTS;

CREATE TABLE EDUCATION(
  EDU_NO NUMBER CONSTRAINT PK_EDUCATION PRIMARY KEY,
  USER_CODE VARCHAR2(20) CONSTRAINT NN_EDU_USERCODE NOT NULL,
  EDU_PEOPLE NUMBER CONSTRAINT NN_EDU_EDUPEOPLE NOT NULL,
  EDU_WRITE_DATE DATE DEFAULT SYSDATE,
  EDU_DATE DATE DEFAULT SYSDATE,
  EDU_REQUEST VARCHAR2(500),
  EDU_KIND VARCHAR2(15) CONSTRAINT NN_EDU_EDUKIND NOT NULL,
  
  CONSTRAINT FK_EDU_USERCODE FOREIGN KEY (USER_CODE) REFERENCES GROUPWAREUSER (USER_CODE) ON DELETE CASCADE,
  CONSTRAINT CHK_EDU_EDUKIND CHECK (EDU_KIND IN ('집체', '단체'))
);

COMMENT ON TABLE EDUCATION IS '교육';
COMMENT ON COLUMN EDUCATION.EDU_NO IS '교육 번호';
COMMENT ON COLUMN EDUCATION.USER_CODE IS '사용자 코드';
COMMENT ON COLUMN EDUCATION.EDU_PEOPLE IS '교육 인원';
COMMENT ON COLUMN EDUCATION.EDU_WRITE_DATE IS '작성일';
COMMENT ON COLUMN EDUCATION.EDU_DATE IS '교육일';
COMMENT ON COLUMN EDUCATION.EDU_REQUEST IS '요청사항';
COMMENT ON COLUMN EDUCATION.EDU_KIND IS '교육 종류';

-- 교육 번호 시퀀스
DROP SEQUENCE EDU_SEQ;

CREATE SEQUENCE EDU_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 교육 테이블 샘플 데이터
INSERT INTO EDUCATION VALUES (EDU_SEQ.NEXTVAL, 'A001', '100', DEFAULT, '19/11/02', NULL, '집체');
INSERT INTO EDUCATION VALUES (EDU_SEQ.NEXTVAL, 'A002', '10', DEFAULT, '19/10/10', '단체 교육 원합니다.', '단체');
INSERT INTO EDUCATION VALUES (EDU_SEQ.NEXTVAL, 'A003', '20', '19/09/30', DEFAULT, NULL, '단체');
INSERT INTO EDUCATION VALUES (EDU_SEQ.NEXTVAL, 'A004', '50', '19/10/01', '19/11/01', '교육 원합니다...', '집체');
INSERT INTO EDUCATION VALUES (EDU_SEQ.NEXTVAL, 'A005', '15', DEFAULT, '19/10/05', NULL, '단체');


-- 문의 테이블
DROP TABLE REQUEST CASCADE CONSTRAINTS;

CREATE TABLE REQUEST(
  REQ_NO NUMBER CONSTRAINT PK_REQUEST PRIMARY KEY,
  USER_CODE VARCHAR2(20) CONSTRAINT NN_REQ_USERCODE NOT NULL,
  REQ_KIND VARCHAR2(15) CONSTRAINT NN_REQ_REQKIND NOT NULL,
  REQ_DATE DATE DEFAULT SYSDATE,
  REQ_CONTENT VARCHAR2(500),
  
  CONSTRAINT FK_REQ_USERCODE FOREIGN KEY (USER_CODE) REFERENCES GROUPWAREUSER (USER_CODE) ON DELETE CASCADE
);

COMMENT ON TABLE REQUEST IS '문의';
COMMENT ON COLUMN REQUEST.REQ_NO IS '문의 번호';
COMMENT ON COLUMN REQUEST.USER_CODE IS '사용자 코드';
COMMENT ON COLUMN REQUEST.REQ_KIND IS '형태';
COMMENT ON COLUMN REQUEST.REQ_DATE IS '작성일';
COMMENT ON COLUMN REQUEST.REQ_CONTENT IS '내용';

-- 문의 번호 시퀀스
DROP SEQUENCE REQ_SEQ;

CREATE SEQUENCE REQ_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 문의 테이블 샘플 데이터
INSERT INTO REQUEST VALUES (REQ_SEQ.NEXTVAL, 'A001', '버그', DEFAULT, NULL);
INSERT INTO REQUEST VALUES (REQ_SEQ.NEXTVAL, 'A002', '느려짐', DEFAULT, NULL);
INSERT INTO REQUEST VALUES (REQ_SEQ.NEXTVAL, 'A003', '버그', DEFAULT, '버그가 발견되어 문의 남깁니다.');
INSERT INTO REQUEST VALUES (REQ_SEQ.NEXTVAL, 'A004', '오류', '19/09/30', '로그인 오류 발생');
INSERT INTO REQUEST VALUES (REQ_SEQ.NEXTVAL, 'A005', '오류', '19/07/31', NULL);


-- 비회원 문의 테이블
DROP TABLE NONMEMBER CASCADE CONSTRAINTS;

CREATE TABLE NONMEMBER(
  NON_NO NUMBER CONSTRAINT PK_NONMEMBER PRIMARY KEY,
  NON_NAME VARCHAR2(20) CONSTRAINT NN_NON_NOMNAME NOT NULL,
  NON_COM VARCHAR2(20) CONSTRAINT NN_NON_NOMCOM NOT NULL,
  NON_PHONE VARCHAR2(25) CONSTRAINT NN_NON_NOMPHONE NOT NULL,
  NON_SEL VARCHAR2(20),
  NON_EMAIL VARCHAR2(50),
  NON_DATE DATE DEFAULT SYSDATE,
  NON_CONTENT VARCHAR2(500),
  NON_KIND VARCHAR2(15)
  
  CONSTRAINT CHK_NON_NONKIND CHECK (NON_KIND IN ('가입상담', '문의'))
);

COMMENT ON TABLE NONMEMBER IS '비회원 문의';
COMMENT ON COLUMN NONMEMBER.NON_NO IS '문의 번호';
COMMENT ON COLUMN NONMEMBER.NON_NAME IS '이름';
COMMENT ON COLUMN NONMEMBER.NON_COM IS '회사명';
COMMENT ON COLUMN NONMEMBER.NON_PHONE IS '전화번호';
COMMENT ON COLUMN NONMEMBER.NON_SEL IS '휴대폰';
COMMENT ON COLUMN NONMEMBER.NON_EMAIL IS '이메일';
COMMENT ON COLUMN NONMEMBER.NON_DATE IS '작성일';
COMMENT ON COLUMN NONMEMBER.NON_CONTENT IS '문의 내용';
COMMENT ON COLUMN NONMEMBER.NON_KIND IS '문의 종류';

-- 비회원 문의 번호 시퀀스
DROP SEQUENCE NON_SEQ;

CREATE SEQUENCE NON_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 비회원 문의 테이블 샘플 데이터
INSERT INTO NONMEMBER VALUES (NON_SEQ.NEXTVAL, '조하영', '소리지음', '02-9876-5432', NULL, NULL, DEFAULT, '가입 상담 원합니다.', '가입상담');
INSERT INTO NONMEMBER VALUES (NON_SEQ.NEXTVAL, '구미영', '하이아파트', '02-2345-5678', NULL, NULL, '19/09/30', '가격 조정 문의', '문의');
INSERT INTO NONMEMBER VALUES (NON_SEQ.NEXTVAL, '신승민', 'NHMP', '031-456-7789', NULL, NULL, '19/10/01', '그룹웨어에 대해 궁금한 것이 있습니다..', '문의');
INSERT INTO NONMEMBER VALUES (NON_SEQ.NEXTVAL, '박예은', '소리지음2', '02-332-2345', NULL, NULL, DEFAULT, '나도 그룹웨어와 다른 그룹웨어의 차별점이 무엇인가요?', '문의');
INSERT INTO NONMEMBER VALUES (NON_SEQ.NEXTVAL, '박근수', 'NHMP2', '02-684-6789', NULL, NULL, DEFAULT, '가입 상담 문의드립니다.', '가입상담');


-- 클라우드 홈페이지 사용자 테이블
DROP TABLE CLOUD CASCADE CONSTRAINTS;

CREATE TABLE CLOUD(
  CL_NO NUMBER CONSTRAINT PK_CLOUD PRIMARY KEY,
  CL_NAME VARCHAR2(20) CONSTRAINT NN_CL_CLNAME NOT NULL,
  CL_ID VARCHAR2(20) CONSTRAINT NN_CL_CLID NOT NULL,
  CL_PWD VARCHAR2(20) CONSTRAINT NN_CL_CLPWD NOT NULL,
  CL_PHONE VARCHAR2(25) CONSTRAINT NN_CL_CLPHONE NOT NULL,
  CL_EMAIL VARCHAR2(50),
  CL_ADDRESS VARCHAR2(200) CONSTRAINT NN_CL_CLADDRESS NOT NULL,
  CL_DATE DATE DEFAULT SYSDATE,
  
  CONSTRAINT UNI_CL_CLID UNIQUE (CL_ID),
  CONSTRAINT UNI_CL_CLEMAIL UNIQUE (CL_EMAIL)
);

COMMENT ON TABLE CLOUD IS '클라우드 홈페이지 사용자';
COMMENT ON COLUMN CLOUD.CL_NO IS '사용자 번호';
COMMENT ON COLUMN CLOUD.CL_NAME IS '이름';
COMMENT ON COLUMN CLOUD.CL_ID IS '아이디';
COMMENT ON COLUMN CLOUD.CL_PWD IS '비밀번호';
COMMENT ON COLUMN CLOUD.CL_PHONE IS '전화번호';
COMMENT ON COLUMN CLOUD.CL_EMAIL IS '이메일';
COMMENT ON COLUMN CLOUD.CL_ADDRESS IS '주소';
COMMENT ON COLUMN CLOUD.CL_DATE IS '가입일';

-- 클라우드 홈페이지 사용자 번호 시퀀스
DROP SEQUENCE CL_SEQ;

CREATE SEQUENCE CL_SEQ
START WITH 1
INCREMENT BY 1
NOMAXVALUE
NOCYCLE;

-- 클라우드 홈페이지 사용자 샘플 데이터
INSERT INTO CLOUD VALUES (CL_SEQ.NEXTVAL, '관리자', 'cloudadmin', 'cloudadmin', '1111-1111', 'cloudadmin@nadogroupware.com', '경기도 의정부시', SYSDATE);
INSERT INTO CLOUD VALUES (CL_SEQ.NEXTVAL, '손혜진', 'december3104', '3104', '010-7111-1111', 'december3104@naver.com', '경기도 의정부시', SYSDATE);
INSERT INTO CLOUD VALUES (CL_SEQ.NEXTVAL, '조하영', 'hayong', '1234', '02-9876-5432', 'hayong@naver.com', '서울', SYSDATE);
INSERT INTO CLOUD VALUES (CL_SEQ.NEXTVAL, '김형규', 'gudrb0202', '0202', '010-0202-0202', 'gudrb0202@naver.com', '경기도 수원시', SYSDATE);
INSERT INTO CLOUD VALUES (CL_SEQ.NEXTVAL, '이영수', 'soo0801', '0801', '010-6111-6666', 'soo0801@naver.com', '경기도 수원시', SYSDATE);


-- 1. EMAIL 테이블에 새로운 CLOB 컬럼을 추가
-- ALTER TABLE [테이블명] ADD ([임시컬럼명] CLOB);
ALTER TABLE EMAIL ADD (EMAIL_CONTENT_CLOB CLOB);
-- 2. 기존의 컬럼을 새로운 CLOB 컬럼에 복사한다.
-- UPDATE [테이블명] SET [임시컬럼명] = [기존컬럼명];
-- [임시컬럼] 에 [기존컬럼]에 있던 값을 복사
UPDATE EMAIL SET EMAIL_CONTENT_CLOB = EMAIL_CONTENT;
-- 3. [기존컬럼]을 삭제
--ALTER TABLE [테이블명] DROP COLUMN [기존컬럼명];
ALTER TABLE EMAIL DROP COLUMN EMAIL_CONTENT;
-- 4. [임시컬럼명]을 [기존컬럼명]으로 바꾼다.
ALTER TABLE EMAIL RENAME COLUMN EMAIL_CONTENT_CLOB TO EMAIL_CONTENT;

-- 커밋
COMMIT;
